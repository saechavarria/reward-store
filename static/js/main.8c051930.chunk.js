(this["webpackJsonpreward-store"]=this["webpackJsonpreward-store"]||[]).push([[0],{57:function(e,t,a){e.exports=a.p+"static/media/loading.ee9c1c4b.gif"},78:function(e,t,a){e.exports=a(91)},91:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(8),o=a.n(c),l=a(7),i=a.n(l),s=a(15),u=a(13),p=Object(n.createContext)(null),m=a(142),f=a(64),d=a.n(f);var h=function(e,t){var a=Object(n.useState)(1),r=Object(u.a)(a,2),c=r[0],o=r[1],l=Math.ceil(e.length/t);return{next:function(){o((function(e){return Math.min(e+1,l)}))},prev:function(){o((function(e){return Math.max(e-1,1)}))},jump:function(e){var t=Math.max(1,e);o((function(e){return Math.min(t,l)}))},currentData:function(){var a=(c-1)*t,n=a+t;return e.slice(a,n)},currentPage:c,maxPage:l}},b=a(133),E=a(131);function O(){return new Promise(function(){var e=Object(s.a)(i.a.mark((function e(t,a){var n,r,c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://coding-challenge-api.aerolab.co/user/me",n={headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZmE4ODkwOGI5NTIzZTAwMjA3ZTFmYzAiLCJpYXQiOjE2MDQ4ODA2NDh9.Wtn96Dvpl8LhRWE9EsUW8gHYJvSMIRkCLuWsSpZLQ0c"}},e.prev=2,e.next=5,fetch("https://coding-challenge-api.aerolab.co/user/me",n);case 5:return r=e.sent,e.next=8,r.json();case 8:c=e.sent,o={name:c.name,points:c.points},t(o),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),a(new Error(e.t0));case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t,a){return e.apply(this,arguments)}}())}function g(){return new Promise(function(){var e=Object(s.a)(i.a.mark((function e(t,a){var n,r,c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://coding-challenge-api.aerolab.co/products",n={headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZmE4ODkwOGI5NTIzZTAwMjA3ZTFmYzAiLCJpYXQiOjE2MDQ4ODA2NDh9.Wtn96Dvpl8LhRWE9EsUW8gHYJvSMIRkCLuWsSpZLQ0c"}},e.prev=2,e.next=5,fetch("https://coding-challenge-api.aerolab.co/products",n);case 5:return r=e.sent,e.next=8,r.json();case 8:c=e.sent,o=c.map((function(e){return{id:e._id,category:e.category,cost:e.cost,img:e.img,name:e.name}})),t(o),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),a(new Error(e.t0));case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t,a){return e.apply(this,arguments)}}())}function v(){var e={headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZmE4ODkwOGI5NTIzZTAwMjA3ZTFmYzAiLCJpYXQiOjE2MDQ4ODA2NDh9.Wtn96Dvpl8LhRWE9EsUW8gHYJvSMIRkCLuWsSpZLQ0c"}};return new Promise(function(){var t=Object(s.a)(i.a.mark((function t(a,n){var r,c,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://coding-challenge-api.aerolab.co/user/history",e);case 3:return r=t.sent,t.next=6,r.json();case 6:c=t.sent,o=c.map((function(e){return{productId:e.productId,name:e.name,cost:e.cost,category:e.category,_id:e._id,createDate:e.createDate}})),a(o),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),n(new Error(t.t0));case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}())}function j(e){var t={productId:e},a=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),n={body:a,method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZmE4ODkwOGI5NTIzZTAwMjA3ZTFmYzAiLCJpYXQiOjE2MDQ4ODA2NDh9.Wtn96Dvpl8LhRWE9EsUW8gHYJvSMIRkCLuWsSpZLQ0c"}};return new Promise(function(){var e=Object(s.a)(i.a.mark((function e(t,a){var r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://coding-challenge-api.aerolab.co/redeem",n);case 3:r=e.sent,c=r.json(),t(c),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),a(new Error(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}())}function y(e){var t={amount:e},a=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),n={body:a,method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZmE4ODkwOGI5NTIzZTAwMjA3ZTFmYzAiLCJpYXQiOjE2MDQ4ODA2NDh9.Wtn96Dvpl8LhRWE9EsUW8gHYJvSMIRkCLuWsSpZLQ0c"}};return new Promise(function(){var e=Object(s.a)(i.a.mark((function e(t,a){var r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://coding-challenge-api.aerolab.co/user/points",n);case 3:r=e.sent,c=r.json(),t(c),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),a(new Error(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}())}var x=a(136),w=a(140),I=a(139),k=a(135),C=a(137),N=a(138),D=a(69),J=a(153),T=a(57),A=a.n(T),R=a(159),S=Object(E.a)((function(e){return Object(R.a)({root:{display:"flex",marginTop:40},media:{height:200,width:200}})})),W=function(){var e=S();return r.a.createElement(b.a,{container:!0,justify:"center",className:e.root},r.a.createElement("img",{src:A.a,className:e.media,alt:"imageLoading"}))},M=Object(E.a)({table:{minWidth:650,padding:25}}),z=function(){var e=M(),t=Object(n.useState)([]),a=Object(u.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(!0),p=Object(u.a)(l,2),m=p[0],f=p[1],d=Object(n.useState)(1),E=Object(u.a)(d,2),O=E[0],g=E[1],j=Math.ceil(c.length/10),y=h(c,10);return Object(n.useEffect)((function(){function e(){return(e=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v();case 3:t=e.sent,o(t),f(!1),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),m?r.a.createElement(W,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{container:!0,justify:"center"},r.a.createElement(k.a,{component:D.a},r.a.createElement(x.a,{className:e.table,size:"small","aria-label":"a dense table"},r.a.createElement(C.a,null,r.a.createElement(N.a,null,r.a.createElement(I.a,null,"Date"),r.a.createElement(I.a,{align:"right"},"PRODUCT"),r.a.createElement(I.a,{align:"right"},"CATEGORY"),r.a.createElement(I.a,{align:"right"},"COST\xa0(Points)"))),r.a.createElement(w.a,null,y.currentData().map((function(e,t){return r.a.createElement(N.a,{key:t},r.a.createElement(I.a,{component:"th",scope:"row"},e.createDate),r.a.createElement(I.a,{align:"right"},e.name),r.a.createElement(I.a,{align:"right"},e.category),r.a.createElement(I.a,{align:"right"},e.cost))})))),r.a.createElement(b.a,{container:!0,justify:"center"},r.a.createElement(J.a,{size:"large",count:j,page:O,onChange:function(e,t){g(t),y.jump(t)},color:"secondary"})))))},L=a(157),Q=a(154),Z=Object(E.a)((function(e){return Object(R.a)({button:{color:"#ffffff"},modal:{position:"absolute",width:800,backgroundColor:" white",border:"2px solid #000",boxShadow:e.shadows[5],padding:"16px 32px 24px",top:"50%",left:"50%",transform:"translate(-50%,-50%)"}})})),Y=function(){var e=Z(),t=r.a.useState(!1),a=Object(u.a)(t,2),n=a[0],c=a[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a,{title:"Redeem History"},r.a.createElement(m.a,{color:"secondary",component:"span",className:e.button,onClick:function(){c(!0)}},r.a.createElement(d.a,null))),r.a.createElement(Q.a,{open:n,onClose:function(){c(!1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},r.a.createElement("div",{className:e.modal},r.a.createElement(z,null))))},G=a(155),P=a(158),U=a(65),F=a.n(U),B=a(143),X=Object(E.a)((function(e){return Object(R.a)({btn:{color:"#ffffff"}})})),H=function(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),a=t[0],c=t[1],o=Object(n.useContext)(p).setUser,l=X(),f=r.a.useState(null),d=Object(u.a)(f,2),h=d[0],b=d[1];function E(e){return g.apply(this,arguments)}function g(){return(g=Object(s.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.prev=1,b(null),e.next=5,y(t);case 5:return e.next=7,O();case 7:a=e.sent,o(a),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0),b(null);case 15:c(!1);case 16:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}return a?r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,{className:l.btn,size:20})):r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a,{title:"Add Points"},r.a.createElement(m.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){b(e.currentTarget)},className:l.btn},r.a.createElement(F.a,null))),r.a.createElement(G.a,{id:"simple-menu",anchorEl:h,keepMounted:!0,open:Boolean(h),onClose:function(){b(null)}},r.a.createElement(P.a,{onClick:function(){return E(1e3)}},"Add 1000"),r.a.createElement(P.a,{onClick:function(){return E(5e3)}},"Add 5000"),r.a.createElement(P.a,{onClick:function(){return E(7500)}},"Add 7500")))},V=a(144),_=a(145),q=a(146),K=a(66),$=a.n(K),ee=Object(E.a)((function(e){return Object(R.a)({root:{flexGrow:1},title:{flexGrow:1},link:{color:"#ffffff"}})})),te=function(){var e=Object(n.useContext)(p).user,t=ee();return r.a.createElement("div",{className:t.root},r.a.createElement(V.a,{position:"static",color:"secondary"},r.a.createElement(_.a,null,r.a.createElement(q.a,{variant:"h6",className:t.title},r.a.createElement(L.a,{title:"My Github"},r.a.createElement("a",{href:"https://github.com/saechavarria/reward-store",className:t.link,target:"_blank",rel:"noopener noreferrer"},r.a.createElement($.a,null)))),e&&r.a.createElement(Y,null),r.a.createElement(q.a,{variant:"h6"},e?e.name.toUpperCase()+", POINTS: "+(new Intl.NumberFormat).format(e.points):"LOADING..."),e&&r.a.createElement(H,null))))},ae=a(147),ne=a(148),re=a(149),ce=a(67),oe=a.n(ce),le=a(150),ie=a(50),se=a.n(ie),ue=Object(E.a)((function(e){return Object(R.a)({root:{maxWidth:245},media:{height:0,paddingTop:"56.25%"},redeemButton:{marginTop:12,width:100,marginLeft:60},btn:{marginTop:12}})})),pe=function(e){var t=ue(),a=Object(n.useContext)(p).user,c=Object(n.useContext)(p).setUser,o=Object(n.useState)(!1),l=Object(u.a)(o,2),m=l[0],f=l[1];function d(){return(d=Object(s.a)(i.a.mark((function t(a){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f(!0),t.prev=1,t.next=4,j(a);case 4:return t.next=6,O();case 6:n=t.sent,c(n),se()("Good job!","You've redeemed the product ".concat(e.product.name," successfully"),"success"),f(!1),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(1),se()("Good job!","You've not redeemed the product ".concat(e.product.name," successfully"),"error"),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[1,12]])})))).apply(this,arguments)}return m?r.a.createElement(W,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(ae.a,{className:t.root},r.a.createElement(ne.a,{className:t.media,image:e.product.img.hdUrl,title:"imagen"}),r.a.createElement(re.a,null,r.a.createElement(q.a,{variant:"body2",color:"textSecondary",component:"p"},e.product.category),r.a.createElement(q.a,{variant:"body2",color:"textPrimary",component:"p"},e.product.name),r.a.createElement("div",{className:t.redeemButton},a.points<e.product.cost?r.a.createElement(q.a,{variant:"body2",color:"textPrimary",component:"p"},"You need ",e.product.cost-a.points," points"):r.a.createElement(r.a.Fragment,null,!m&&r.a.createElement(L.a,{title:"Redeem"},r.a.createElement(le.a,{onClick:function(){return function(e){return d.apply(this,arguments)}(e.product.id)},className:t.btn,variant:"contained",color:"secondary",endIcon:r.a.createElement(oe.a,null)},e.product.cost)))))))},me=a(152),fe=a(151);var de=Object(E.a)({container:{marginTop:20,padding:10,flexGrow:1},footer:{position:"fixed",left:0,bottom:0,width:"100%"}}),he=function(){var e=Object(n.useContext)(p).user,t=Object(n.useState)([]),a=Object(u.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(1),m=Object(u.a)(l,2),f=m[0],d=m[1],E=Math.ceil(c.length/10),O=h(c,10);function v(){return(v=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g();case 3:t=e.sent,o(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("ERROR : "+e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}Object(n.useEffect)((function(){function e(){return(e=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g();case 3:t=e.sent,o(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("ERROR : "+e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var j=de(),y=r.a.useState(1),x=Object(u.a)(y,2),w=x[0],I=x[1];return e?r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,{square:!0},r.a.createElement(me.a,{value:w,indicatorColor:"secondary",textColor:"secondary",onChange:function(e,t){I(t)},"aria-label":"inittabs"},r.a.createElement(fe.a,{label:"sort by:",disabled:!0}),r.a.createElement(fe.a,{label:"Most recently",onClick:function(){return function(){return v.apply(this,arguments)}()}}),r.a.createElement(fe.a,{label:"Lower Price",onClick:function(){return function(e){e.sort((function(e,t){return e.cost-t.cost}))}(c)}}),r.a.createElement(fe.a,{label:"Highest Price",onClick:function(){return function(e){e.sort((function(e,t){return t.cost-e.cost}))}(c)}}))),r.a.createElement(b.a,{container:!0,spacing:2,justify:"center",className:j.container},c?O.currentData().map((function(e,t){return r.a.createElement(b.a,{item:!0,lg:2,md:4,sm:6,xs:12,key:t},r.a.createElement(pe,{product:e}))})):r.a.createElement("h1",null,"loading")),r.a.createElement(b.a,{container:!0,justify:"center",className:j.container},r.a.createElement(J.a,{size:"large",count:E,page:f,onChange:function(e,t){d(t),O.jump(t)},color:"secondary"})),r.a.createElement(D.a,{square:!0},r.a.createElement(me.a,{value:0,indicatorColor:"secondary",textColor:"secondary","aria-label":""},r.a.createElement(fe.a,{label:"REWARD STORE",disabled:!0})))):r.a.createElement(W,null)},be=(a(90),function(){var e=Object(n.useState)(null),t=Object(u.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){function e(){return(e=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O();case 3:t=e.sent,c(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("ERROR : "+e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(p.Provider,{value:{user:a,setUser:c}},r.a.createElement(te,null),r.a.createElement(he,null)))});o.a.render(r.a.createElement(be,null),document.getElementById("root"))}},[[78,1,2]]]);
//# sourceMappingURL=main.8c051930.chunk.js.map