(this["webpackJsonpreward-store"]=this["webpackJsonpreward-store"]||[]).push([[0],{55:function(e,t,n){e.exports=n.p+"static/media/loading.ee9c1c4b.gif"},72:function(e,t,n){e.exports=n(85)},85:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(8),o=n.n(c),i=n(7),l=n.n(i),u=n(15),s=n(11),p=Object(a.createContext)(null),m=n(136),f=n(60),d=n.n(f);var h=function(e,t){var n=Object(a.useState)(1),r=Object(s.a)(n,2),c=r[0],o=r[1],i=Math.ceil(e.length/t);return{next:function(){o((function(e){return Math.min(e+1,i)}))},prev:function(){o((function(e){return Math.max(e-1,1)}))},jump:function(e){var t=Math.max(1,e);o((function(e){return Math.min(t,i)}))},currentData:function(){var n=(c-1)*t,a=n+t;return e.slice(n,a)},currentPage:c,maxPage:i}},b=n(128),O=n(126);function E(){return new Promise(function(){var e=Object(u.a)(l.a.mark((function e(t,n){var a,r,c,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://coding-challenge-api.aerolab.co/user/me",a={headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZWRkOWU5OTQ0NGZlNDAwNmRhOTkyNGQiLCJpYXQiOjE1OTE1ODIzNjF9.-f40dyUIGFsBSB_PTeBGdSLI58I21-QBJNi9wkODcKk"}},e.prev=2,e.next=5,fetch("https://coding-challenge-api.aerolab.co/user/me",a);case 5:return r=e.sent,e.next=8,r.json();case 8:c=e.sent,o={name:c.name,points:c.points},t(o),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),n(new Error(e.t0));case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t,n){return e.apply(this,arguments)}}())}function g(){return new Promise(function(){var e=Object(u.a)(l.a.mark((function e(t,n){var a,r,c,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://coding-challenge-api.aerolab.co/products",a={headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZWRkOWU5OTQ0NGZlNDAwNmRhOTkyNGQiLCJpYXQiOjE1OTE1ODIzNjF9.-f40dyUIGFsBSB_PTeBGdSLI58I21-QBJNi9wkODcKk"}},e.prev=2,e.next=5,fetch("https://coding-challenge-api.aerolab.co/products",a);case 5:return r=e.sent,e.next=8,r.json();case 8:c=e.sent,o=c.map((function(e){return{id:e._id,category:e.category,cost:e.cost,img:e.img,name:e.name}})),t(o),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),n(new Error(e.t0));case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t,n){return e.apply(this,arguments)}}())}function j(){var e={headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZWRkOWU5OTQ0NGZlNDAwNmRhOTkyNGQiLCJpYXQiOjE1OTE1ODIzNjF9.-f40dyUIGFsBSB_PTeBGdSLI58I21-QBJNi9wkODcKk"}};return new Promise(function(){var t=Object(u.a)(l.a.mark((function t(n,a){var r,c,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://coding-challenge-api.aerolab.co/user/history",e);case 3:return r=t.sent,t.next=6,r.json();case 6:c=t.sent,o=c.map((function(e){return{productId:e.productId,name:e.name,cost:e.cost,category:e.category,_id:e._id,createDate:e.createDate}})),n(o),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a(new Error(t.t0));case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}())}function v(e){var t={productId:e},n=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),a={body:n,method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZWRkOWU5OTQ0NGZlNDAwNmRhOTkyNGQiLCJpYXQiOjE1OTE1ODIzNjF9.-f40dyUIGFsBSB_PTeBGdSLI58I21-QBJNi9wkODcKk"}};return new Promise(function(){var e=Object(u.a)(l.a.mark((function e(t,n){var r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://coding-challenge-api.aerolab.co/redeem",a);case 3:r=e.sent,c=r.json(),t(c),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),n(new Error(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}())}function y(e){var t={amount:e},n=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),a={body:n,method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZWRkOWU5OTQ0NGZlNDAwNmRhOTkyNGQiLCJpYXQiOjE1OTE1ODIzNjF9.-f40dyUIGFsBSB_PTeBGdSLI58I21-QBJNi9wkODcKk"}};return new Promise(function(){var e=Object(u.a)(l.a.mark((function e(t,n){var r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://coding-challenge-api.aerolab.co/user/points",a);case 3:r=e.sent,c=r.json(),t(c),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),n(new Error(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}())}var x=n(131),k=n(135),I=n(134),w=n(130),N=n(132),C=n(133),T=n(65),J=n(146),G=n(55),B=n.n(G),S=n(151),R=Object(O.a)((function(e){return Object(S.a)({root:{display:"flex",marginTop:40},media:{height:200,width:200}})})),D=function(){var e=R();return r.a.createElement(b.a,{container:!0,justify:"center",className:e.root},r.a.createElement("img",{src:B.a,className:e.media,alt:"imageLoading"}))},Q=Object(O.a)({table:{minWidth:650,padding:20}}),P=function(){var e=Q(),t=Object(a.useState)([]),n=Object(s.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)(!0),p=Object(s.a)(i,2),m=p[0],f=p[1],d=Object(a.useState)(1),O=Object(s.a)(d,2),E=O[0],g=O[1],v=Math.ceil(c.length/10),y=h(c,10);return Object(a.useEffect)((function(){function e(){return(e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j();case 3:t=e.sent,o(t),f(!1),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),m?r.a.createElement(D,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{container:!0,justify:"center"},r.a.createElement(w.a,{component:T.a},r.a.createElement(x.a,{className:e.table,size:"small","aria-label":"a dense table"},r.a.createElement(N.a,null,r.a.createElement(C.a,null,r.a.createElement(I.a,null,"Date"),r.a.createElement(I.a,{align:"right"},"PRODUCT"),r.a.createElement(I.a,{align:"right"},"CATEGORY"),r.a.createElement(I.a,{align:"right"},"COST\xa0(Points)"))),r.a.createElement(k.a,null,y.currentData().map((function(e,t){return r.a.createElement(C.a,{key:t},r.a.createElement(I.a,{component:"th",scope:"row"},e.createDate),r.a.createElement(I.a,{align:"right"},e.name),r.a.createElement(I.a,{align:"right"},e.category),r.a.createElement(I.a,{align:"right"},e.cost))})))),r.a.createElement(b.a,{container:!0,justify:"center"},r.a.createElement(J.a,{size:"large",count:v,page:E,onChange:function(e,t){g(t),y.jump(t)},color:"secondary"})))))},U=n(149),z=Object(O.a)((function(e){return Object(S.a)({button:{color:"#ffffff"},modal:{position:"absolute",width:800,backgroundColor:" white",border:"2px solid #000",boxShadow:e.shadows[5],padding:"16px 32px 24px",top:"50%",left:"50%",transform:"translate(-50%,-50%)"}})})),F=function(){var e=z(),t=r.a.useState(!1),n=Object(s.a)(t,2),a=n[0],c=n[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{color:"secondary",component:"span",className:e.button,onClick:function(){c(!0)}},r.a.createElement(d.a,null)),r.a.createElement(U.a,{open:a,onClose:function(){c(!1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},r.a.createElement("div",{className:e.modal},r.a.createElement(P,null))))},W=n(148),A=n(150),L=n(61),X=n.n(L),Z=n(137),M=Object(O.a)((function(e){return Object(S.a)({btn:{color:"#ffffff"}})})),Y=function(){var e=Object(a.useState)(!1),t=Object(s.a)(e,2),n=t[0],c=t[1],o=Object(a.useContext)(p).setUser,i=M(),f=r.a.useState(null),d=Object(s.a)(f,2),h=d[0],b=d[1];function O(e){return g.apply(this,arguments)}function g(){return(g=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.prev=1,b(null),e.next=5,y(t);case 5:return e.next=7,E();case 7:n=e.sent,o(n),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0),b(null);case 15:c(!1);case 16:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}return n?r.a.createElement(r.a.Fragment,null,r.a.createElement(Z.a,{className:i.btn,size:20})):r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){b(e.currentTarget)},className:i.btn},r.a.createElement(X.a,null)),r.a.createElement(W.a,{id:"simple-menu",anchorEl:h,keepMounted:!0,open:Boolean(h),onClose:function(){b(null)}},r.a.createElement(A.a,{onClick:function(){return O(1e3)}},"Add 1000"),r.a.createElement(A.a,{onClick:function(){return O(5e3)}},"Add 5000"),r.a.createElement(A.a,{onClick:function(){return O(7500)}},"Add 7500")))},_=n(138),K=n(139),V=n(140),q=n(62),H=n.n(q),$=Object(O.a)((function(e){return Object(S.a)({root:{flexGrow:1},title:{flexGrow:1},link:{color:"#ffffff"}})})),ee=function(){var e=Object(a.useContext)(p).user,t=$();return r.a.createElement("div",{className:t.root},r.a.createElement(_.a,{position:"static",color:"secondary"},r.a.createElement(K.a,null,r.a.createElement(V.a,{variant:"h6",className:t.title},r.a.createElement("a",{href:"https://github.com/saechavarria/reward-store",className:t.link,target:"_blank",rel:"noopener noreferrer"},r.a.createElement(H.a,null))),e&&r.a.createElement(F,null),r.a.createElement(V.a,{variant:"h6"},e?e.name.toUpperCase()+", POINTS: "+(new Intl.NumberFormat).format(e.points):"LOADING..."),e&&r.a.createElement(Y,null))))},te=n(141),ne=n(142),ae=n(143),re=n(63),ce=n.n(re),oe=n(144),ie=n(48),le=n.n(ie),ue=Object(O.a)((function(e){return Object(S.a)({root:{maxWidth:245},media:{height:0,paddingTop:"56.25%"},redeemButton:{marginTop:12,width:100,marginLeft:60},btn:{marginTop:12}})})),se=function(e){var t=ue(),n=Object(a.useContext)(p).user,c=Object(a.useContext)(p).setUser,o=Object(a.useState)(!1),i=Object(s.a)(o,2),m=i[0],f=i[1];function d(){return(d=Object(u.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f(!0),t.prev=1,t.next=4,v(n);case 4:return t.next=6,E();case 6:a=t.sent,c(a),le()("Good job!","You've redeemed the product ".concat(e.product.name," successfully"),"success"),f(!1),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(1),le()("Good job!","You've not redeemed the product ".concat(e.product.name," successfully"),"error"),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[1,12]])})))).apply(this,arguments)}return m?r.a.createElement(D,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(te.a,{className:t.root},r.a.createElement(ne.a,{className:t.media,image:e.product.img.hdUrl,title:"imagen"}),r.a.createElement(ae.a,null,r.a.createElement(V.a,{variant:"body2",color:"textSecondary",component:"p"},e.product.category),r.a.createElement(V.a,{variant:"body2",color:"textPrimary",component:"p"},e.product.name),r.a.createElement("div",{className:t.redeemButton},n.points<e.product.cost?"You need ".concat(e.product.cost-n.points):r.a.createElement(r.a.Fragment,null,!m&&r.a.createElement(oe.a,{onClick:function(){return function(e){return d.apply(this,arguments)}(e.product.id)},className:t.btn,variant:"contained",color:"secondary",endIcon:r.a.createElement(ce.a,null)},e.product.cost))))))},pe=n(147),me=n(145);var fe=Object(O.a)({container:{marginTop:20,padding:10,flexGrow:1},footer:{position:"fixed",left:0,bottom:0,width:"100%"}}),de=function(){var e=Object(a.useContext)(p).user,t=Object(a.useState)([]),n=Object(s.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)(1),m=Object(s.a)(i,2),f=m[0],d=m[1],O=Math.ceil(c.length/10),E=h(c,10);function j(){return(j=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g();case 3:t=e.sent,o(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("ERROR : "+e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}Object(a.useEffect)((function(){function e(){return(e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g();case 3:t=e.sent,o(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("ERROR : "+e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var v=fe(),y=r.a.useState(1),x=Object(s.a)(y,2),k=x[0],I=x[1];return e?r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,{square:!0},r.a.createElement(pe.a,{value:k,indicatorColor:"secondary",textColor:"secondary",onChange:function(e,t){I(t)},"aria-label":"inittabs"},r.a.createElement(me.a,{label:"sort by:",disabled:!0}),r.a.createElement(me.a,{label:"Most recently",onClick:function(){return function(){return j.apply(this,arguments)}()}}),r.a.createElement(me.a,{label:"Lower Price",onClick:function(){return function(e){e.sort((function(e,t){return e.cost-t.cost}))}(c)}}),r.a.createElement(me.a,{label:"Highest Price",onClick:function(){return function(e){e.sort((function(e,t){return t.cost-e.cost}))}(c)}}))),r.a.createElement(b.a,{container:!0,spacing:2,justify:"center",className:v.container},c?E.currentData().map((function(e,t){return r.a.createElement(b.a,{item:!0,lg:2,md:4,sm:6,xs:12,key:t},r.a.createElement(se,{product:e}))})):r.a.createElement("h1",null,"loading")),r.a.createElement(b.a,{container:!0,justify:"center",className:v.container},r.a.createElement(J.a,{size:"large",count:O,page:f,onChange:function(e,t){d(t),E.jump(t)},color:"secondary"})),r.a.createElement(T.a,{square:!0},r.a.createElement(pe.a,{value:0,indicatorColor:"secondary",textColor:"secondary","aria-label":""},r.a.createElement(me.a,{label:"REWARD STORE",disabled:!0})))):r.a.createElement(D,null)},he=(n(84),function(){var e=Object(a.useState)(null),t=Object(s.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){function e(){return(e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E();case 3:t=e.sent,c(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("ERROR : "+e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(p.Provider,{value:{user:n,setUser:c}},r.a.createElement(ee,null),r.a.createElement(de,null)))});o.a.render(r.a.createElement(he,null),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.1b775d01.chunk.js.map